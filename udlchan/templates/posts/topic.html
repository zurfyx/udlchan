{% extends "posts/base.html" %}
{% load static %}

{% block local_scripts %}
    <script src="{% static "js/posts/vote.js" %}"></script>
    <script src="{% static "js/posts/comment.js" %}"></script>
{% endblock %}

{% block posts_content %}
    <a href="{% url "posts:category" object.category %}">{{ object.category }}</a>

    <!-- TOPIC -->
    <h2>
        <upvotes>
            <a class="vote" href="{% url "posts:topic_upvote" object.id %}">&uarr;</a>
            <span class="vote_label">{{ object.vote.up }}</span>
        </upvotes>
        <downvotes>
            <a class="vote" href="{% url "posts:topic_downvote" object.id %}">&darr;</a>
            <span class="vote_label">{{ object.vote.down }}</span>
        </downvotes>
        {{ object.title }}
    </h2>
    <p>{{ object.content }}</p>
    <hr>
    <hr>

    <!-- ADD NEW COMMENT -->
    <form class="new_comment" method="POST" action="{% url "posts:comment_add" object.id %}">
        {% csrf_token %}
        {{ form }}
        <button type="submit">Save</button>
    </form>

    <!-- COMMENTS -->
    {% for comment in comments %}
        <p>
            {{ comment.content }}
        </p>
        <hr>
    {% endfor %}
{% endblock %}