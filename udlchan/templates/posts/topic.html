{% extends "posts/base.html" %}
{% load static %}

{% block local_scripts %}
    <script src="{% static "js/posts/vote.js" %}"></script>
    <script src="{% static "js/posts/comment.js" %}"></script>
{% endblock %}

{% block nav %}
    <a href="{% url "posts:category" %}">Categories</a> >
    <a href="{% url "posts:category" object.category %}">{{ object.category }}</a> >
    <a href="{% url "posts:topic" object.id %}">{{ object.title }}</a>
{% endblock %}

{% block posts_content %}
    <h2>{{ object.category }}</h2>

    <!-- TOPIC -->
    <div class="fit-width shadowed element push-up">
        <span class="right irrelevant">
            {{ object.created }}
        </span>
        <span class="element-title">
            {{ object.title }}
        </span>
        {{ object.content }}

        <!-- ADD NEW COMMENT -->
        <form class="new_comment" method="POST" action="{% url "posts:comment_add" object.id %}">
            {% include "basic_form_partial.html" %}
            <button type="submit">Save</button>
        </form>
    </div>

    <!-- COMMENTS -->
    <ul class="fit-width element-list" style="margin-top:10px;">
        {% for comment in comments %}
            <li class="shadowed element">
                <span class="irrelevant right">
                    {{ comment.created }}
                </span>

                {{ comment.content }}

                <ul class="element-links">
                    <li>
                       <a href="#">Reply</a>
                    </li>
                    <li>
                        <a href="#">Permalink</a>
                    </li>
                </ul>

                <div class="reply">
                    {# auto-generated #}
                </div>
            </li>
        {% endfor %}
    </ul>
{% endblock %}